---
import { PUBLIC_BASE_URL } from 'astro:env/client';
import "../styles/eurl.css";
import ColorInput from '../components/ColorInput.astro';
import TplInput from '../components/TplInput.astro';
import DropdownSelect from '../components/DropdownSelect.astro';
import { fontFileMap } from '../../core/loaders/loadFonts';
import { pathMap } from '../../core/loaders/assets';

// Prepare options for DropdownSelect
const fontOptions = [
    { label: '預設 (Default)', value: '', fontExText: '<<預設的字體font>>' },
    ...Object.keys(fontFileMap).map(key => ({
        label: key,
        value: key,
        fontId: key
    }))
];

const tplOptions = Object.entries(pathMap).map(([key, value]) => ({
    label: key,
    value: key,
    image: value // Example for future use
}));

const generatorConfig = {
    debounceDelay: 1000,
    defaults: {
        default_alpha: '255',
        default_scale: '1',
        bg_shadow: '5',
        bg_radius: '8',
        bg_padding: '10',
        canvas_width: '',
        canvas_height: '',
        ph_width: '300',
        ph_height: '',
        bd_width: '5',
        bd_color: '9a9996',
        embed_alt: 'Image'
    }
};
---
<section id="intro" class="prose prose-sm !max-w-none -mt-[1em] border-b-1 mb-6">
    <div class="grid grid-cols-1 lg:grid-cols-3 gap-4">
        <div class="col-span-2">
            <!-- <h2>簡介</h2> -->
            <p class="xl:inline">本站提供URL直連網址，可讓你在設計網站時，在已知尺寸的情況下，可快速插入預留圖可以幫助您排版。同時也新增邊緣背景設計的功能，方便用於製作螢幕截圖示意圖、簡報圖美化用途。</p>
            <p class="xl:inline xl:pl-[1em]">更詳盡的說明，請看 ➤ <a href="/use">使用說明</a></p>
            <h3>常用範例</h3>
            <pre class="overflow-x-auto">&lt;img src=&quot;{PUBLIC_BASE_URL}/300x200.svg&quot;&gt; &lt;!-- &#x4E00;&#x822C;&#x9810;&#x7559;&#x5716; --&gt;
&lt;img src=&quot;{PUBLIC_BASE_URL}/400x200?text=&#x1F5BC;&#xFE0F;&#x9810;&#x7559;&#x5716;&#x1F609;&amp;filetype=png&quot;&gt; &lt;!-- &#x81EA;&#x8A02;&#x6587;&#x6848;&#x9810;&#x7559;&#x5716; --&gt;
&lt;img src=&quot;{PUBLIC_BASE_URL}/400x200/ff0000/FFF/?text=I am red.&quot;&gt; &lt;!-- &#x81EA;&#x8A02;&#x80CC;&#x666F;&#x8272;&#x8207;&#x6587;&#x5B57;&#x984F;&#x8272;&#x7684;&#x9810;&#x7559;&#x5716; --&gt;
&lt;img src=&quot;{PUBLIC_BASE_URL}/300x200/bg/5/10/ph.svg&quot;&gt; &lt;!-- &#x5E36;&#x6709;&#x5E36;&#x6709;&#x9670;&#x5F71;&#x7684;&#x900F;&#x660E;&#x908A;&#x7DE3;&#x7684;&#x9810;&#x7559;&#x5716; --&gt;
&lt;img src=&quot;{PUBLIC_BASE_URL}/300x200/bg/5/10/4/tpl(drool-l)/ph.svg&quot;&gt; &lt;!--&#x5E36;&#x6709;&#x5E36;&#x6709;&#x5713;&#x89D2;&#x9670;&#x5F71;&#x7684;&#x5716;&#x6848;&#x908A;&#x7DE3;&#x7684;&#x9810;&#x7559;&#x5716;--&gt;</pre>
        </div>
        <div class="prose-img:m-2 hidden lg:flex">
            <img class="object-contain" alt="fakeimg.pl" src="/440x250/bg/5/3/ph/282828/eae0d0.png">
        </div>
    </div>
</section>

<article class="grid">
    <header class="mb-6 prose">
        <h2 class="">製作佔位圖</h2>
    </header>

    <div role="alert" class="hidden md:grid lg:hidden mb-6 alert alert-info" id="tablet-orientation-alert">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
            class="h-6 w-6 shrink-0 stroke-current">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
        </svg>

        <span>
            若你是使用平板，建議你將螢幕轉成橫向，會有最好的使用體驗！
        </span>

        <!-- 關閉按鈕（純原生） -->
        <button type="button" class="btn btn-sm btn-ghost ml-auto" id="tablet-alert-close" aria-label="關閉提示">✕</button>
    </div>

    <!-- eurl section -->
    <div id="eurl-sticky" class="sticky top-0 eurl mb-6 p-2 rounded-xl w-full whitespace-nowrap bg-neutral text-neutral-content z-[100] shadow-lg">
      <span class="eurl-base"><span class="eurl-group">{PUBLIC_BASE_URL}</span></span>
      <span class="eurl-content" id="eurl-content">
          <!-- Dynamic content will be injected here by JS -->
      </span>
    </div>

    <div class="grid grid-cols-1 lg:grid-cols-12 gap-4">
        <div class="lg:col-span-5">

            <form id="generator-form" action="/generate" method="GET" data-config={JSON.stringify(generatorConfig)}>
            <div class="grid gap-4">
                    <!-- Canvas Size Section -->
                    <section class="card bg-indigo-600/30 shadow-sm">
                        <div class="card-body">
                            <header class="flex items-center justify-between">
                                <h2 class="card-title md:flex mb-0">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-dimensions"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 5h11" /><path d="M12 7l2 -2l-2 -2" /><path d="M5 3l-2 2l2 2" /><path d="M19 10v11" /><path d="M17 19l2 2l2 -2" /><path d="M21 12l-2 -2l-2 2" /><path d="M3 10m0 2a2 2 0 0 1 2 -2h7a2 2 0 0 1 2 2v7a2 2 0 0 1 -2 2h-7a2 2 0 0 1 -2 -2z" /></svg>
                                    畫布大小
                                </h2>
                                <div class="pr-2">
                                    <p class="label">Optional</p>
                                    <input type="checkbox" id="toggle-canvas-size" class="toggle" />
                                </div>
                            </header>

                            <div class="content collapsible-content" id="content-canvas-size">
                                <div>
                                    <fieldset class="fieldset">
                                        <label class="input w-full">
                                            <input type="number" name="canvas_width" placeholder="Width" class="w-full" /><span class="label">px</span>
                                            x
                                            <input type="number" name="canvas_height" placeholder="Height" class="w-full" /><span class="label">px</span>
                                        </label>
                                    </fieldset>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- Edge Background Section -->
                    <section class="card bg-cyan-600/30 shadow-sm">
                        <div class="card-body">
                            <header class="flex items-center justify-between">
                                <h2 class="card-title md:flex mb-0">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-stack-back"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 8l8 4l8 -4l-8 -4z" /><path d="M12 16l-4 -2l-4 2l8 4l8 -4l-4 -2l-4 2z" fill="currentColor" /><path d="M8 10l-4 2l4 2m8 0l4 -2l-4 -2" /></svg>
                                    邊緣背景
                                </h2>
                                <div class="pr-2">
                                    <p class="label">Optional</p>
                                    <input type="checkbox" id="toggle-edge-bg" class="toggle" />
                                </div>
                            </header>

                            <div class="content collapsible-content" id="content-edge-bg">
                                <div>
                                    <fieldset class="fieldset">
                                        <legend class="fieldset-legend">Padding</legend>
                                        <label class="input w-full">
                                            <input type="number" name="bg_padding_w" placeholder="Width" class="w-full" /><span class="label">%</span>
                                            x
                                            <input type="number" name="bg_padding_h" placeholder="Height" class="w-full" /><span class="label">%</span>
                                        </label>
                                    </fieldset>

                                    <fieldset class="fieldset">
                                        <legend class="fieldset-legend">Shadow</legend>
                                        <label class="input w-full">
                                            <input type="number" name="bg_shadow" class="w-full" placeholder="0" /><span class="label">%</span>
                                        </label>
                                        <p class="label">Optional</p>
                                    </fieldset>

                                    <fieldset class="fieldset">
                                        <legend class="fieldset-legend">Radius</legend>
                                        <label class="input w-full">
                                            <input type="number" name="bg_radius" class="w-full" placeholder="0" /><span class="label">%</span>
                                        </label>
                                        <p class="label">Optional</p>
                                    </fieldset>

                                    <fieldset class="fieldset">
                                        <div class="tabs">
                                            <legend class="fieldset-legend mr-6 w-full sm:w-auto">Background</legend>
                                            <label class="label pr-4 mb-2">
                                                <input type="radio" name="bg_type" class="tab radio" value="color" checked />
                                                Color
                                            </label>
                                            <div class="tab-content">
                                                <ColorInput name="bg_color" />
                                            </div>

                                            <label class="label pr-4 mb-2">
                                                <input type="radio" name="bg_type" class="tab radio" value="tpl" />
                                                Template
                                            </label>
                                            <div class="tab-content">
                                                <TplInput name="bg_tpl" options={tplOptions} />
                                            </div>

                                            <label class="label pr-4 mb-2">
                                                <input type="radio" name="bg_type" class="tab radio" value="none" />None
                                            </label>
                                            <div class="tab-content">
                                                <div class="p-2 text-sm opacity-50">Transarent Background</div>
                                            </div>
                                        </div>
                                    </fieldset>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- Border Section -->
                    <section class="card bg-slate-600/30 shadow-sm">
                        <div class="p-3">
                            <header class="flex items-center justify-between p-1 mr-4 ml-2 mt-2 mb-2">
                                <h2 class="card-title md:flex mb-0">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-square-dashed"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 5a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z" /></svg>
                                    內容邊框
                                </h2>
                                <div class="text-sm">
                                    <p class="label">Optional</p>
                                    <input type="checkbox" id="toggle-bd" class="toggle" />
                                </div>
                            </header>
                            <div class="content collapsible-content" id="content-bd">
                                <div class="-mt-2 tabs tabs-lift">
                                    <label class="tab">
                                        <input type="radio" name="bd_tab" checked />
                                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-square-dashed"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 5a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z" /></svg>
                                        Border
                                    </label>
                                    <div class="tab-content bg-base-100/50 border-base-300 p-3">
                                        <fieldset class="fieldset">
                                            <legend class="fieldset-legend">Width</legend>
                                            <label class="input w-full">
                                                <input type="number" name="bd_w" placeholder="Width" class="w-full" /><span class="label">%</span>
                                            </label>
                                        </fieldset>

                                        <fieldset class="fieldset">
                                            <div class="tabs">
                                                <legend class="fieldset-legend mr-6 w-full sm:w-auto">Background</legend>
                                                <label class="label pr-4 mb-2">
                                                    <input type="radio" name="bd_type" class="tab radio" value="color" checked />
                                                    Color
                                                </label>
                                                <div class="tab-content">
                                                    <ColorInput name="bd_color" />
                                                </div>

                                                <label class="label pr-4 mb-2">
                                                    <input type="radio" name="bd_type" class="tab radio" value="none" />None
                                                </label>
                                                <div class="tab-content">
                                                    <div class="p-2 text-sm opacity-50">Transarent Background</div>
                                                </div>
                                            </div>
                                        </fieldset>
                                    </div>

                                    <label class="tab tab-disabled">
                                        <input type="radio" name="bd_tab" value="window" disabled />
                                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="icon icon-tabler icons-tabler-filled icon-tabler-barrier-block"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 21a1 1 0 0 1 0 -2h1v-2h-8v2h1a1 1 0 0 1 0 2h-4a1 1 0 0 1 0 -2h1v-2h-1a2 2 0 0 1 -2 -2v-7a2 2 0 0 1 2 -2h1v-1a1 1 0 1 1 2 0v1h8v-1a1 1 0 0 1 2 0v1h1a2 2 0 0 1 2 2v7a2 2 0 0 1 -2 2h-1v2h1a1 1 0 0 1 0 2zm-2.086 -13l-7 7h4.17l6.916 -7zm6.086 2.914l-4.086 4.086h4.086zm-10.916 -2.914h-3.084v3.084z" /></svg>
                                        Window (未開放)
                                    </label>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- Main Content Section -->
                    <section class="card bg-yellow-600/30 shadow-sm">
                        <div class="p-3">

                            <div class="tabs tabs-lift">
                                <header class="w-full sm:w-auto items-center justify-between mr-4 ml-2 mt-2">
                                    <h2 class="card-title mb-0">主內容</h2>
                                </header>

                                <label class="tab ml-4 mr-4 sm:ml-auto sm:mr-0">
                                    <input type="radio" name="content_tab" checked />
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="icon icon-tabler icons-tabler-filled icon-tabler-square-rounded-letter-p"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M11.676 2.001l.324 -.001c7.752 0 10 2.248 10 10l-.005 .642c-.126 7.235 -2.461 9.358 -9.995 9.358l-.642 -.005c-7.13 -.125 -9.295 -2.395 -9.358 -9.67v-.325c0 -7.643 2.185 -9.936 9.676 -9.999m.324 4.999h-2a1 1 0 0 0 -1 1v8a1 1 0 0 0 1 1l.117 -.007a1 1 0 0 0 .883 -.993v-3h1a3 3 0 0 0 0 -6m0 2a1 1 0 0 1 0 2h-1v-2z" /></svg>
                                    placeholder
                                </label>
                                <div class="tab-content bg-base-100/50 border-base-300 p-3">
                                    <fieldset class="fieldset" id="block-size-fieldset">
                                        <legend class="fieldset-legend">區塊大小 (Block Size)</legend>
                                        <label class="input w-full">
                                            <input type="number" name="ph_width" placeholder="Width" class="w-full" /><span class="label">px</span>
                                            x
                                            <input type="number" name="ph_height" placeholder="Height" class="w-full" /><span class="label">px</span>
                                        </label>
                                    </fieldset>

                                    <fieldset class="fieldset">
                                        <div class="tabs">
                                            <legend class="fieldset-legend mr-6 w-full sm:w-auto">Background</legend>
                                            <label class="label pr-4 mb-2">
                                                <input type="radio" name="ph_bg_type" class="tab radio" value="color" checked />
                                                Color
                                            </label>
                                            <div class="tab-content">
                                                <ColorInput name="ph_bg_color" />
                                            </div>

                                            <label class="label pr-4 mb-2">
                                                <input type="radio" name="ph_bg_type" class="tab radio" value="tpl" />
                                                Template
                                            </label>
                                            <div class="tab-content">
                                                <TplInput name="ph_bg_tpl" options={tplOptions} />
                                            </div>

                                            <label class="label pr-4 mb-2">
                                                <input type="radio" name="ph_bg_type" class="tab radio" value="default" />Default
                                            </label>
                                            <div class="tab-content">
                                                <div class="p-2 text-sm opacity-50">Default Color</div>
                                            </div>
                                        </div>
                                    </fieldset>

                                    <fieldset class="fieldset">
                                        <div class="tabs">
                                            <legend class="fieldset-legend mr-6 w-full sm:w-auto">Foreground Color</legend>
                                            <label class="label pr-4 mb-2">
                                                <input type="radio" name="ph_fg_type" class="tab radio" value="color" checked />
                                                Color
                                            </label>
                                            <div class="tab-content">
                                                <ColorInput name="ph_fg_color" />
                                            </div>

                                            <label class="label pr-4 mb-2">
                                                <input type="radio" name="ph_fg_type" class="tab radio" value="default" />Default
                                            </label>
                                            <div class="tab-content">
                                                <div class="p-2 text-sm opacity-50">Default Color</div>
                                            </div>
                                        </div>
                                    </fieldset>

                                    <fieldset class="fieldset">
                                        <legend class="fieldset-legend">Text</legend>
                                        <input type="text" name="text" class="input w-full" placeholder="" />
                                        <p class="label">Optional</p>
                                    </fieldset>

                                    <fieldset class="fieldset">
                                        <legend class="fieldset-legend">Icon (emoji) or Title</legend>
                                        <input type="text" name="title" class="input w-full" placeholder="" />
                                        <p class="label">Optional</p>
                                    </fieldset>

                                    <fieldset class="fieldset">
                                        <legend class="fieldset-legend">Font</legend>
                                        <DropdownSelect
                                            name="font"
                                            class="select select-bordered"
                                            options={fontOptions}
                                            placeholder="預設 (Default)"
                                        />
                                    <span class="label">Optional</span>
                                    </fieldset>

                                </div>

                                <label class="tab tab-disabled">
                                    <input type="radio" name="bd_tab" value="window" disabled />
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="icon icon-tabler icons-tabler-filled icon-tabler-barrier-block"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 21a1 1 0 0 1 0 -2h1v-2h-8v2h1a1 1 0 0 1 0 2h-4a1 1 0 0 1 0 -2h1v-2h-1a2 2 0 0 1 -2 -2v-7a2 2 0 0 1 2 -2h1v-1a1 1 0 1 1 2 0v1h8v-1a1 1 0 0 1 2 0v1h1a2 2 0 0 1 2 2v7a2 2 0 0 1 -2 2h-1v2h1a1 1 0 0 1 0 2zm-2.086 -13l-7 7h4.17l6.916 -7zm6.086 2.914l-4.086 4.086h4.086zm-10.916 -2.914h-3.084v3.084z" /></svg>
                                    Code (未開放)
                                </label>
                            </div>

                        </div>
                    </section>


                    <section class="card bg-green-600/30 shadow-sm">
                        <div class="card-body">
                            <header class="flex items-center justify-between">
                                <h2 class="card-title md:flex mb-0">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-settings"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z" /><path d="M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0" /></svg>
                                    額外設定
                                </h2>
                            </header>

                            <fieldset class="fieldset">
                                <legend class="fieldset-legend">Scale</legend>
                                <label class="input w-full px-0">
                                    <DropdownSelect
                                        name="scale"
                                        class="pl-4 select-bordered"
                                        defaultValue="1"
                                        options={[
                                            { value: '1', label: '1' },
                                            { value: '2', label: '2' },
                                            { value: '3', label: '3' },
                                            { value: '4', label: '4' },
                                            { value: '5', label: '5' },
                                        ]}
                                    />
                                    <span class="label mx-0"> * 100%</span>
                                </label>
                            </fieldset>

                            <fieldset class="fieldset">
                                <legend class="fieldset-legend">Other options</legend>
                                <label class="label">
                                    <input type="checkbox" name="debug" value="1" class="checkbox" />
                                    Debug Mode
                                </label>
                            </fieldset>

                            <fieldset class="fieldset">
                                <legend class="fieldset-legend">File Type</legend>
                                <div class="join">
                                    <input class="join-item btn" type="radio" name="filetype" value="null" aria-label="預設" checked />
                                    <input class="join-item btn" type="radio" name="filetype" value="svg" aria-label=".svg" />
                                    <input class="join-item btn" type="radio" name="filetype" value="png" aria-label=".png" />
                                    <input class="join-item btn" type="radio" name="filetype" value="ico" aria-label=".ico" />
                                </div>
                            </fieldset>

                            <noscript>
                                <button type="submit" class="btn btn-primary w-full mt-4">Generate URL (No JS)</button>
                            </noscript>

                        </div>
                    </section>
                </div>
            </form>
        </div>

        <div class="lg:col-span-7">
            <div id="preview-sticky-container" class="sticky top-24 grid gap-4 z-10 transition-[top] duration-300">

                <section class="mockup-browser border-base-300 border w-full">
                    <div class="mockup-browser-toolbar">
                        <span id="preview-loading" class="loading loading-spinner loading-md hidden"></span>
                        <div class="input w-[65%] p-2 overflow-hidden text-ellipsis whitespace-nowrap" id="preview-url-display">...</div>
                        <div class="dropdown dropdown-end">
                        <div tabindex="0" role="button" class="btn m-0 text-nowrap">下載 ▼</div>
                        <ul tabindex="-1" class="dropdown-content menu bg-base-100 rounded-box z-1 w-52 p-2 shadow-sm">
                            <li>
                                <a id="download-svg" target="_blank" download>
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-file-type-svg"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 3v4a1 1 0 0 0 1 1h4" /><path d="M5 12v-7a2 2 0 0 1 2 -2h7l5 5v4" /><path d="M4 20.25c0 .414 .336 .75 .75 .75h1.25a1 1 0 0 0 1 -1v-1a1 1 0 0 0 -1 -1h-1a1 1 0 0 1 -1 -1v-1a1 1 0 0 1 1 -1h1.25a.75 .75 0 0 1 .75 .75" /><path d="M10 15l2 6l2 -6" /><path d="M20 15h-1a2 2 0 0 0 -2 2v2a2 2 0 0 0 2 2h1v-3" /></svg>
                                    .svg
                                </a>
                            </li>
                            <li>
                                <a id="download-png" target="_blank" download>
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-file-type-png"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 3v4a1 1 0 0 0 1 1h4" /><path d="M5 12v-7a2 2 0 0 1 2 -2h7l5 5v4" /><path d="M20 15h-1a2 2 0 0 0 -2 2v2a2 2 0 0 0 2 2h1v-3" /><path d="M5 18h1.5a1.5 1.5 0 0 0 0 -3h-1.5v6" /><path d="M11 21v-6l3 6v-6" /></svg>
                                    .png
                                </a>
                            </li>
                            <li>
                                <a id="download-ico" target="_blank" download>
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-file-download"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 3v4a1 1 0 0 0 1 1h4" /><path d="M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z" /><path d="M12 17v-6" /><path d="M9.5 14.5l2.5 2.5l2.5 -2.5" /></svg>
                                    .ico
                                </a>
                            </li>
                        </ul>
                        </div>
                    </div>
                    <div class="grid place-content-center p-4 border-t border-base-300 backgroundImg-grid min-h-[300px]">
                        <img id="preview-image" src="" alt="Preview" loading="eager" fetchpriority="high" class="max-w-full h-auto" />
                    </div>
                </section>

                <section class="card bg-base-200 shadow-sm">
                    <div class="card-body">
                        <header class="flex items-center justify-between">
                            <h2 class="card-title md:flex mb-0">嵌入圖片</h2>
                        </header>
                        <!-- name of each tab group should be unique -->
                        <div class="tabs tabs-lift">
                            <label class="tab z-2">
                                <input type="radio" name="embed" checked />
                                HTML
                            </label>
                            <div class="tab-content break-all border-base-300 bg-base-100 p-6">
                                <pre class="text-wrap break-all" id="embed-html"></pre>
                            </div>

                            <label class="tab z-2">
                                <input type="radio" name="embed" />
                                Markdown
                            </label>
                            <div class="tab-content break-all border-base-300 bg-base-100 p-6">
                                <pre class="text-wrap break-all" id="embed-markdown"></pre>
                            </div>
                        </div>
                    </div>
                </section>

            </div>
        </div>
    </div>

</article>

<script>
    // Generator initialization logic is now handled in Layout.astro
    // to ensure it re-runs correctly during Swup transitions.
</script>
<!-- 原生 JavaScript：關閉 alert -->
<!-- -------------- CSS：淡出動畫（保留）---------------------- -->
<style>
  /* 初始狀態：可見 */
  #tablet-orientation-alert {
    transition: opacity 0.3s ease, transform 0.3s ease;
  }
  /* 被隱藏時的樣式 */
  #tablet-orientation-alert.fade-out {
    opacity: 0;
    transform: scale(0.95);
  }
</style>

<!-- -------------- 原生 JS：點擊關閉 → 淡出 ----------------- -->
<script defer>
  document.addEventListener('DOMContentLoaded', () => {
    const closeBtn = document.getElementById('tablet-alert-close');
    const alertBox = document.getElementById('tablet-orientation-alert');

    if (!closeBtn || !alertBox) return;

    // 點擊關閉按鈕
    closeBtn.addEventListener('click', () => {
      // 加入淡出類別，觸發 CSS transition
      alertBox.classList.add('fade-out');

      // 動畫結束後隱藏元素（避免留下佔位）
      const onEnd = () => {
        alertBox.style.display = 'none';   // 完全移除顯示
        // 依需求也可以在此加上 Tailwind 的 hidden 類別
        // alertBox.classList.add('hidden');
        alertBox.removeEventListener('transitionend', onEnd);
      };
      alertBox.addEventListener('transitionend', onEnd);
    });
  });
</script>
