---
interface Props {
    name?: string;
    disabled?: boolean;
    valHex?: string;
    valAlpha?: string;
}

const { name = 'color', disabled = false, valHex = '', valAlpha = '255' } = Astro.props;
---

<color-input class="block" data-name={name}>
    <div class="color-input-group flex flex-col gap-1">
        <div class="flex items-center gap-2">
            <!-- 顏色選擇器 -->
            <div
                class="relative w-10 h-10 rounded-lg overflow-hidden border border-neutral shadow-sm shrink-0"
                class:opacity-50={disabled}
            >
                <input
                    type="color"
                    class="absolute -inset-2 w-14 h-14 cursor-pointer color-picker"
                    {disabled}
                />
            </div>

            <!-- Hex 輸入與 Alpha 滑桿 -->
            <div class="flex-1 flex flex-col gap-1">
                <input
                    type="text"
                    name={`${name}_hex`}
                    value={valHex}
                    placeholder="Hex (e.g. ff0000)"
                    class="input w-full text-sm px-2 py-1 rounded-md hex-input"
                    class:opacity-50={disabled}
                    {disabled}
                />

                <div class="flex items-center gap-2">
                    <input
                        type="range"
                        name={`${name}_alpha`}
                        min="0"
                        max="255"
                        value={valAlpha}
                        class="flex-1 h-1.5 bg-neutral rounded-lg appearance-none cursor-pointer accent-blue-600 alpha-input"
                        class:cursor-not-allowed={disabled}
                        {disabled}
                    />
                    <span
                        class="text-[10px] w-8 text-right alpha-display"
                        class:text-slate-300={disabled}
                    >
                        {Math.round((parseInt(valAlpha) / 255) * 100)}%
                    </span>
                </div>
            </div>
        </div>
    </div>
</color-input>

<script>
    import '../scripts/components/color-input';
</script>
