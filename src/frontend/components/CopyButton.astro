---
// src/frontend/components/CopyButton.astro

export interface Props {
  /** 要複製的文字 */
  text: string;
  /** 按鈕文字，預設「複製」 */
  label?: string;
  /** 可自訂外層 class（DaisyUI / Tailwind） */
  class?: string;
}

/* 取得傳入的屬性 */
const { text, label = '複製', class: className = '' } = Astro.props;
const buttonId = `copy-btn-${Math.random().toString(36).substr(2, 9)}`;
const toastId = `toast-${Math.random().toString(36).substr(2, 9)}`;
---

<copy-button class="relative inline-block" data-text={text}>
  <a
    id={buttonId}
    class={className}
    href="javascript:void(0)"
  >
    <slot>{label}</slot>
  </a>

  <!-- DaisyUI Toast (出現在按鈕下方，初始隱藏，由腳本控制顯示) -->
  <div id={toastId} class="toast toast-bottom absolute top-0 z-1000 opacity-0 pointer-events-none transition-opacity duration-300">
    <div class="alert alert-success">
      <div class="flex-1">
        <span>已複製到剪貼簿</span>
      </div>
    </div>
  </div>
</copy-button>

<script>
  import '../scripts/components/copy-button';
</script>
